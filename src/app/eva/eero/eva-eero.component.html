<div class="card-header" style="background-color:rgba(39, 194, 0, 0.548)">
  {{ pageTitle }}
  <button
  class="card"
  style="background-color: rgb(255, 255, 255); float: right; margin: 2px; padding: 3px;"
  (click) = "runSpeedtest()"
  [disabled]="runningTest"
>{{runningTest ? "Running Test" : "Run a Test"}}</button>
  <div
    class="card"
    style="background-color: rgb(255, 255, 255); float: right; margin: 2px; padding: 3px;"
  >
    <a *ngIf="fileUrl" [href]="fileUrl" download="Speedtest Results.csv">Download as CSV</a>
  </div>
</div>
<div class="card">
  <ul class="list-group list-group-flush">
    <li
      class="list-group-item hover-row"
      *ngFor="let row of rows; let i = index"
    >
      {{ row.date | date: 'medium' }}
      <button class="btn btn-light" (click)="setShowingTable(i)">{{showTable === i ? "Hide" : "Show"}}</button>
      <div
        class="card"
        [ngStyle]="{ height: showTable === i ? 'auto' : '0%' }"
        *ngIf="showTable === i"
      >
      <div>FAILED TESTS: {{row.failed.length ? row.failed : "None"}}</div>
        <ngx-datatable [columns]="columns" [rows]="row.results" [scrollbarV]="true" [sortType] = "SortType.multi">
          <ngx-datatable-column name="Owner" width="150"></ngx-datatable-column>
          <ngx-datatable-column name="Network ID" prop="network id" width="150"></ngx-datatable-column>
          <ngx-datatable-column name="Date" prop="speed.date" width="300"></ngx-datatable-column>
          <ngx-datatable-column name="Down Value" prop="speed.down.value" width="100"></ngx-datatable-column>
          <ngx-datatable-column name="Down Units" prop="speed.down.units" width="100"></ngx-datatable-column>
          <ngx-datatable-column name="Up Value" prop="speed.up.value" width="100"></ngx-datatable-column>
          <ngx-datatable-column name="Up Units" prop="speed.up.units" width="100"></ngx-datatable-column>
        </ngx-datatable>
      </div>
    </li>
  </ul>
</div>
