<div class="modal-header card-header" style="background-color:rgb(0, 51, 102); color:seashell">
  <strong> {{ pageTitle }}</strong>
  <button
    type="button"
    class="close"
    aria-label="Close"
    style="color:white"
    (click)="activeModal.dismiss('Cross click')"
  >
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body rowflex" style="height: 100%; width: 100%">
  <div class="w3-sidebarmod w3-bar-block enborder" style="order:0;">
    <ng-container *ngIf="currentNav">
      <span
        class="nav-span"
        *ngFor="let nav of currentNav"
        (click)="trackAndSelectWorkflow(null, nav[0][0])"
      >
        <i class="fa fa-level-up fa-rotate-90"></i> {{ nav[0] }} - {{ nav[1] }} <br /><i
          class="fa fa-long-arrow-right"
          aria-hidden="true"
        ></i>
        {{ nav[2] }} <br /><br />
      </span>
    </ng-container>
    <div *ngIf="!currentNav">No history to display</div>
  </div>
  <div class="w3-sidebarmod w3-bar-block enborder" style="order:2;">
    <div style="height:70%; top: 0;">
      <form [formGroup]="siForm">
        <div class="sidewrapper">
          <div style="display:inline-block">
            <label for="azotel">Azotel ID:</label>
          </div>
          <input id="azotel" formControlName="azotelId" />
          <!-- <button
          class="btn btn-light"
          (click)="(retrieveAzotel)"
          style="height: 60%; display: inline-block;"
        >
          Retrieve
        </button> -->
        </div>
        <div class="sidewrapper">
          <label for="apName">AP Name:</label>
          <br />
          <input id="apName" formControlName="apName" />
          <br />
          <label for="apIP">AP IP:</label>
          <br />
          <input id="apIP" formControlName="apIP" />
          <br />
        </div>
        <div class="sidewrapper">
          <label for="cpeMAC">CPE MAC:</label><br />
          <input id="cpeMAC" formControlName="cpeMAC" /><br />
          <label for="cpeIP">CPE IP:</label><br />
          <input id="cpeIP" formControlName="cpeIP" />
        </div>
      </form>
    </div>
    <div style="height:30%; bottom:0;">
      <ng-container *ngIf="infoData">
        <span>Disposition Codes: <br /></span>
        <span *ngIf="infoData.disposition[0][1]">Type: {{ infoData.disposition[0][1] }}<br /></span>
        <span *ngIf="infoData.disposition[1][1]"
          >Case Classification: {{ infoData.disposition[1][1] }}<br
        /></span>
        <span *ngIf="infoData.disposition[2][1]"
          >Primary Disposition Code: {{ infoData.disposition[2][1] }}<br
        /></span>
        <span *ngIf="infoData.disposition[3][1]"
          >Secondary Disposition Code: {{ infoData.disposition[3][1] }}<br
        /></span>
        <span *ngIf="infoData.disposition[4][1]"
          >Resolution Code: {{ infoData.disposition[4][1] }}</span
        >
      </ng-container>
    </div>
  </div>
  <div class="columnflex" style="order: 1; margin: 10px; margin-bottom:25px" style="flex:1">
    <div class="w3-bar horiznav">
      <ng-container *ngIf="infoData">
        <div>
          {{ infoData.why }}
        </div>
        <a *ngIf="infoData.learnMore!=='Complete'" href="{{ infoData.learnMore }}">Learn More</a>
      </ng-container>
    </div>
    <form [formGroup]="siForm" style="flex:1">
      <div class="w3-bar w3-bar-block enborder" style="position:relative; padding: 5px;height:75%">
        <ng-container *ngIf="!currentDepartment">
          <div class="card-header bg-secondary option-banner">
            <strong> Choose Your Department:</strong>
          </div>

          <button
            *ngFor="let department of departments; let i = index"
            class="btn btn-light btn-select"
            (click)="setDepartment(i)"
          >
            {{ department.department }}
          </button>
        </ng-container>
        <ng-container *ngIf="currentDepartment && !currentWorkflow">
          <div class="card-header bg-secondary option-banner">
            <strong> Choose a Workflow:</strong>
          </div>
          <button
            *ngFor="let workflow of currentDepartment.workflows; let i = index"
            class="btn btn-light btn-select"
            (click)="selectWorkflow(i)"
          >
            {{ workflow.workflowName }}
          </button>
        </ng-container>
        <ng-container *ngIf="infoData">
          <div class="card-header bg-secondary option-banner"><strong> What to Do: {{ currentWorkflow.label }}</strong></div>
          <div style="white-space: pre-line" *ngIf="!infoDataDataType">{{ infoData.what }}</div>
          <ng-container *ngIf="infoDataDataType">
            <span *ngFor="let entry of jsonInfoDataWhat"
              >{{ entry[0] }} : {{ entry[1] }} <br
            /></span>
          </ng-container>
          <ng-container *ngIf="currentWorkflow.step[0]!=='R'">
            <button
              *ngFor="let option of currentWorkflow.options; let i = index"
              class="btn btn-light btn-select"
              (click)="trackAndSelectWorkflow(i)"
            >
              {{ option[0] }}
            </button>
          </ng-container>
          <ng-container *ngIf="currentWorkflow.step[0]==='R'">
            <button (click)="restart()" class="btn btn-info dangerbuttons">
              Restart
            </button>
            <button (click)="fullRestart()" class="btn btn-danger dangerbuttons">Restart and Clear Notes</button>
            <button
              class="btn btn-danger dangerbuttons"
              (click)="activeModal.close('Close click')"
            >
              Close
            </button>
          </ng-container>
        </ng-container>
      </div>
      <textarea
        placeholder="Add notes here..."
        style="text-align:justify; padding: 4px 0px 4px 0px; width: 99%; height: 25%; resize:none; margin: 25px 10px"
        formControlName="autobox"
      ></textarea>
    </form>
    <div style="order:3; height:25px"></div>
  </div>
</div>
<div class="modal-footer"></div>
